$containerName = "ContainerName"

$storageAccountName = "StorageAccountName"

$StorageAccountKey = "StorageAccountKey"

$storageAcctContext = New-AzureStorageContext  -StorageAccountName $storageAccountName -StorageAccountKey $StorageAccountKey

$OldSnapShots = Get-AzStorageContainer -Context $storageAcctContext | Where-Object { $_.Name -eq $containerName -and $_.IsSnapshot -eq $true } | Where-Object {$_.SnapshotTime -lt "SnapshotTime"}

#SnapShotTime in UTC format 4/1/2020 2:02:11 AM +00:00 so every snapshot older than that date time will be removed.

ForEach ($OldSnapshot in $OldSnapshots) {Remove-AzStorageContainer -Share $OldSnapshot -Confirm:$false -Force}
